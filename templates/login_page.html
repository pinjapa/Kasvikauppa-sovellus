<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Kirjautuminen</title>
</head>

<body>
  {% extends "layout.html" %}
  {% block body %}
  {% if session.username %}
  <p>Olet kirjautunut nimellä {{ session.username }}</p>

  <a href="/logout">Kirjaudu ulos</a>
  |
  <a href="/">Etusivulle</a>
  
  {% else %}
  <form action="/login" method="POST" onsubmit="return check(this)">
  <p>Tunnus:<br>
  <input type="text" name="username" required minlength="1" maxlength="20"></p>
  <p>Salasana:<br>
  <input type="password" name="password" required minlength="1" maxlength="20"></p>
  <input type="submit" value="Kirjaudu">
  </form>
  <p>
    <a href="/create-account-page">Luo käyttäjä </a>
    |
    <a href="/">Etusivulle</a>
  </p>
  {% endif %}
  {% endblock %}
</body>

<script>
  function check(form) {
      if (form.username.value.length > 20) {
          alert("Käyttäjänimi on liian pitkä");
          return false;
      }
      if (form.password.value.length > 20) {
          alert("Salasana on liian pitkä");
          return false;
      }
      return true;
  }
  </script>

</html>